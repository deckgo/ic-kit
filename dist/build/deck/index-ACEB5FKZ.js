var q=(e,t)=>new Promise(async n=>{let i=document.getElementById("slider");if(!i){n();return}let o=await i.getActiveIndex(),a=document.querySelector(".deckgo-slide-container:nth-child("+(o+1)+")");if(!a||a.tagName!=="deckgo-slide-youtube".toUpperCase()&&a.tagName!=="deckgo-slide-video".toUpperCase()){n();return}e==="pause"?await a.pause():await a.play(),t&&await T(e)});async function T(e){let t=document.querySelector("deckgo-remote");!t||(e==="pause"?await t.pause():await t.play())}var L=async e=>{e?.preventDefault();let t=REMOTE_STATE>0&&REMOTE_STATE<4;t&&PENDING_REMOTE_REQUESTS&&PENDING_REMOTE_REQUESTS.length>0?document.querySelector("ion-popover.access")||(await D(),await d()):await R(e,t)};async function R(e,t){let n=document.createElement("div");n.innerHTML=`<div class="ion-padding">
    ${P(t)}
  </div>
  `;let i=document.createElement("ion-popover");i.component=n,e&&(i.event=e),i.mode="ios",i.cssClass="info",document.body.appendChild(i),await i.present();let o=document.querySelector("ion-popover.info ion-toggle");o&&o.addEventListener("ionChange",a=>{M(a)})}async function D(){let e=document.querySelector("ion-popover");e&&await e.dismiss()}async function d(){let e=document.createElement("div");e.innerHTML=`<div class="ion-padding">
    ${I()}
  </div>
  `;let t=document.createElement("ion-popover");t.component=e,t.mode="ios",t.cssClass="access",document.body.appendChild(t),await t.present(),document.querySelector("ion-popover.access button.dismiss")?.addEventListener("click",async()=>{await u(),await document.querySelector("ion-popover.access").dismiss(),await m()}),document.querySelector("ion-popover.access button.connect")?.addEventListener("click",async()=>{await N(),await document.querySelector("ion-popover.access").dismiss(),await m()})}async function M(e){!e||!e.detail||(e.detail.checked?await O():await _())}function P(e){{let t=x();return`<p style="margin: 0; font-size: 16px;">Remote control your presentation with a phone or any devices.</p>
  
    <p style="margin: 0; font-size: 16px;" class="ion-padding-top">Scan the QR-Code or get the Progressive Web Apps at <a href="https://deckdeckgo.app" target="_blank" style="color: var(--ion-color-tertiary);">https://deckdeckgo.app <ion-icon name="open" style="color: var(--ion-color-tertiary); vertical-align: bottom;"></ion-icon></a></p>

    <div class="qrcode-container" style="display: flex; justify-content: center;  --deckgo-qrcode-size: 316px;">
        <deckgo-qrcode content="${`https://deckdeckgo.app/${t&&t!==""?`remote/${t}`:""}`}">
            <ion-icon slot="logo" src="https://deckdeckgo.com/assets/icons/deckdeckgo.svg"></ion-icon>
        </deckgo-qrcode>
    </div>
    
    <ion-list class="ion-no-margin">
        <ion-item style="--border-color: transparent; color: black; --padding-start: 0; --inner-padding-end: 0;">
            <ion-label class="ion-text-wrap" style="margin: 0; font-size: 16px;">Remote control on/off</ion-label> 
            <ion-toggle mode="md" slot="end" checked="${e?"true":"false"}" color="primary" style="--background: var(--ion-color-light); --handle-background: white; --handle-background-checked: white;"></ion-toggle>
        </ion-item>
    </ion-list>

    <p class="ion-no-margin" style="padding-top: 8px; margin-bottom: 0; font-size: 12px;">If you can't connect or lose the connection, toggle off and on the remote to restart.</p>

    <p class="ion-no-margin ion-padding-top" style="margin-bottom: 0; font-size: 12px;">Your presentation's: ${t}</p>`}}function x(){let e=document.querySelector("deckgo-remote");return e&&e.room?e.room:""}function I(){return!PENDING_REMOTE_REQUESTS||PENDING_REMOTE_REQUESTS.length<=0?'<p style="margin: 0; font-size: 16px;">No pending requests.</p>':`<p style="margin: 0; font-size: 16px;">Grant access to remote <strong>${PENDING_REMOTE_REQUESTS[0].message}</strong>?</p>

    <div class="actions" style="display: flex; justify-content: center; align-content: center;">
        <button class="navigation ion-activatable transparent dismiss">
          <ion-ripple-effect></ion-ripple-effect>
          <ion-icon src="https://deckdeckgo.com/assets/icons/ionicons/close.svg"></ion-icon>
        </button>
        
        <button class="navigation ion-activatable primary connect">
          <ion-ripple-effect></ion-ripple-effect>
          <ion-icon src="https://deckdeckgo.com/assets/icons/ionicons/checkmark.svg"></ion-icon>
        </button>
    </div>
    `}async function u(){!PENDING_REMOTE_REQUESTS||PENDING_REMOTE_REQUESTS.length<=0||PENDING_REMOTE_REQUESTS.shift()}async function N(){if(!PENDING_REMOTE_REQUESTS||PENDING_REMOTE_REQUESTS.length<=0)return;let e=document.querySelector("deckgo-remote");e&&await e.start(PENDING_REMOTE_REQUESTS[0].fromSocketId),await u()}async function m(){!PENDING_REMOTE_REQUESTS||PENDING_REMOTE_REQUESTS.length<=0||REMOTE_STATE!==3&&await d()}async function _(){let e=document.querySelector("deckgo-remote");!e||await e.disconnect()}async function O(){let e=document.querySelector("deckgo-remote");if(!e)return;await e.connect();let t=document.getElementById("slider");!t||await t.slideTo(0,300,!1)}var C=class extends HTMLElement{constructor(){super()}async connectedCallback(){let e=await B();this.innerHTML="<ion-list><ion-list-header><h2>Slides</h2></ion-list-header>"+e+"</ion-list>",await A()}};async function B(){let e="",t=document.querySelectorAll("#slider > *");if(t){let n=0;for(let i of Array.from(t))if(i.tagName&&(!i.hasAttribute("slot")||i.getAttribute("slot")==="")){let o=U(i,n);e+="<ion-item ion-item button><ion-label>"+o+"</ion-label></ion-item>",n++}}return e}function U(e,t){if(!e)return"Slide "+(t+1);let n=e.querySelector('[slot="title"],[slot="question"]');if(n&&n.textContent!=="")return n.textContent;{let i=e.querySelector('[slot="start"],[slot="header"]');if(i&&i.textContent!=="")return i.textContent;{let o=e.querySelector('[slot="end"],[slot="footer"]');return o&&o.textContent!==""?o.textContent:"Slide #"+(t+1)}}}customElements.get("deckgo-chapters")||customElements.define("deckgo-chapters",C);async function A(){let e=document.querySelectorAll("deckgo-chapters ion-item");e&&e.forEach((t,n)=>{t.addEventListener("click",async()=>await $(n),!0)})}async function $(e){await document.getElementById("slider")?.slideTo(e,0),await document.querySelector("ion-menu")?.close()}function s(){if(!window)return!1;let e=window.matchMedia("(any-pointer:coarse)").matches,t=window.matchMedia("(any-pointer:fine)").matches;return e&&!t}function y(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)}var z=class extends HTMLElement{constructor(){super()}async connectedCallback(){let e=await G();this.innerHTML="<ion-list no-margin>"+e+"</ion-list>"}};async function G(){let e="";return EMBEDDED||(s()||(e+='<ion-item ion-item button detail="false" id="fullScreenMenu" style="--border-style: none;"><ion-icon src="https://deckdeckgo.com/assets/icons/ionicons/expand.svg" aria-label="Enter full screen" slot="end"></ion-icon><ion-label>Full screen</ion-label></ion-item>'),e+='<ion-item ion-item button detail="false" id="remoteMenu" style="--border-style: none;"><ion-icon src="https://deckdeckgo.com/assets/icons/ionicons/phone-portrait.svg" aria-label="Remote control" slot="end"></ion-icon><ion-label>Remote control</ion-label></ion-item>',e+='<ion-item ion-item button detail="false" id="notes" style="--border-style: none;"><ion-icon src="https://deckdeckgo.com/assets/icons/ionicons/clipboard.svg" aria-label="Display slide notes" slot="end"></ion-icon><ion-label>Slide notes</ion-label></ion-item>'),e+='<ion-item ion-item button detail="false" id="share" style="--border-style: none;"><ion-icon src="https://deckdeckgo.com/assets/icons/ionicons/share.svg" aria-label="Share this presentation" slot="end"></ion-icon><ion-label>Share</ion-label></ion-item>',e+='<ion-item ion-item button detail="false" id="made" style="--border-style: none; --ion-item-background: white;"><ion-icon src="https://deckdeckgo.com/assets/icons/deckdeckgo.svg" aria-label="DeckDeckGo" slot="end"></ion-icon><ion-label>Made with DeckDeckGo</ion-label></ion-item>',e}customElements.get("menu-list")||customElements.define("menu-list",z);function p(e){let t=s();return e.direction==="papyrus"&&!t||e.directionMobile==="papyrus"&&t}function H(e){let t=s();return e.direction==="vertical"&&!t||e.directionMobile==="vertical"&&t}function w(){let e=new URL(window?.location?.href);return e&&e.searchParams?e.searchParams.has("screenshot"):!1}var g=async()=>{let e=document.getElementById("slider");!e||(e.addEventListener("slidesDidLoad",async()=>{await Q(),await r()}),e.addEventListener("slideNextDidChange",async()=>{await r()}),e.addEventListener("slidePrevDidChange",async()=>{await r()}),e.addEventListener("slideToChange",async()=>{await r()}),document.addEventListener("keydown",async t=>{await F(t,e)}))};async function Q(){let e=s(),t=document.querySelector("ion-fab");t&&e&&t.style.setProperty("--deckgo-hide-on-mobile","none");let n=document.getElementById("slider");if(n){if(p(n)){if(document.querySelector("div.ion-page")?.classList.add("papyrus"),window&&"IntersectionObserver"in window){let i=document.querySelector(".deckgo-slide-container:nth-child(1)");if(!i)return;new IntersectionObserver(W,{threshold:.75}).observe(i)}return}H(n)&&document.querySelector("div.ion-page")?.classList.add("vertical")}}function W(e){if(!e||e.length<=0)return;let t=document.querySelector("button#next");!t||(t.style.opacity=e[0].isIntersecting?"1":"0")}async function r(){let e=document.getElementById("slider");if(!e)return;let t=await e.getActiveIndex(),n=await e.isBeginning(),i=await e.isEnd();if(!document.querySelector(".deckgo-slide-container:nth-child("+(t+1)+")"))return;let o=document.querySelector("button#previous");o&&(o.style.opacity=n?"0":"1");let a=document.querySelector("button#next");a&&(a.style.opacity=i?"0":"1")}function F(e,t){return new Promise(async n=>{if(!e||!t){n();return}if(e.code!=="Tab"){n();return}e.preventDefault(),e.shiftKey?await t.slidePrev():await t.slideNext(),n()})}var j=()=>{if(!window||!window.location)return;let e=new URL(window.location.href);EMBEDDED=e&&e.searchParams?e.searchParams.has("embed"):!1},K=async()=>{window&&"ResizeObserver"in window?Y():await J()},Y=()=>{let e=new ResizeObserver(async n=>{await E()}),t=document.querySelector("div.ion-page ion-content");t&&e.observe(t)},J=()=>{window&&"ResizeObserver"in window||setTimeout(async()=>await E(),100)},E=async()=>{let e=document.getElementById("slider");if(!e)return;let t=document.querySelector("div.ion-page ion-content"),n=document.querySelector("div.ion-page ion-content main");!t||!n||(EMBEDDED||p(e)||y()||w()?V(n):X({content:t,main:n}),await e.initSlideSize())},V=e=>{e.style.removeProperty("--main-size-width"),e.style.removeProperty("--main-size-height")},X=({content:e,main:t})=>{let n=e.offsetHeight-32,i=e.offsetWidth-192,o=i*9/16,{width:a,height:b}=o>n?{width:`${n*16/9}px`,height:`${n}px`}:{width:`${i}px`,height:`${o}px`};t.style.setProperty("--main-size-width",a),t.style.setProperty("--main-size-height",b)},Z=async()=>{window&&"ResizeObserver"in window?ee():await te()},ee=()=>{let e=new ResizeObserver(async n=>{await h()}),t=document.querySelector("div.ion-page ion-content");t&&e.observe(t)},te=()=>{window&&"ResizeObserver"in window||setTimeout(async()=>await h(),100)},h=async()=>{let e=document.querySelector("div.ion-page ion-content");if(!e)return;let t=e.querySelector("deckgo-laser-pointer");if(y()){if(t)return;let n=document.createElement("deckgo-laser-pointer");e.appendChild(n);return}t?.parentElement?.removeChild(t)};var v=async()=>{await Promise.all([ne(),ie(),K(),Z()])};async function ne(){if(!(!window||!window.location)&&w()){let e=document.querySelector("#fullscreen-menu");e&&(e.style.display="none");let t=document.querySelector("#previous");t&&(t.style.display="none");let n=document.querySelector("#next");n&&(n.style.display="none");let i=document.querySelector("ion-header");i&&(i.style.display="none");let o=document.querySelector("deckgo-deck");if(o){o.style.setProperty("--pager-display","none");let a=o.querySelector('[slot="actions"]');a&&(a.style.display="none")}}}async function ie(){if(j(),EMBEDDED){let e=document.querySelector("#slidePicker");e&&(e.style.display="none");let t=document.querySelector("deckgo-deck");t&&t.style.setProperty("--pager-display","none")}}var f=()=>new Promise(e=>{document.addEventListener("mouseInactivity",async t=>{let n=document.querySelector("#fullscreen-menu");t&&n&&(n.style.visibility=t.detail?"inherit":"hidden");let i=document.querySelector("#previous");t&&i&&(i.style.visibility=t.detail?"inherit":"hidden");let o=document.querySelector("#next");t&&o&&(o.style.visibility=t.detail?"inherit":"hidden")},{passive:!0}),e()}),oe=!1;async function l(e){if(!history||!oe)return;let t=await e.getActiveIndex(),n=new URL(window.location.href),i=n&&n.searchParams?n.searchParams.get("index"):"-1";(i===null||parseInt(i,0)!==t)&&t>=0&&history.pushState({slideIndex:t},"",t>0?"?index="+t:"")}var ae=async e=>{if(!e||!e.detail)return;let t=document.getElementById("slider");if(!t)return;let n=e.detail.type;if(n==="next_slide"){let i=e.detail.slideAnimation;await t.slideNext(i,!1),await l(t)}else if(n==="prev_slide"){let i=e.detail.slideAnimation;await t.slidePrev(i,!1),await l(t)}else if(n==="slide_action")await ye(e);else if(n==="slide_to"){let i=e.detail.index;i>=0&&(await t.slideTo(i,0),await l(t))}else n==="deck_request"&&await se(e.detail)};async function se(e){PENDING_REMOTE_REQUESTS.push(e),await L(void 0)}var S=async()=>{if(EMBEDDED)return;let e=document.querySelector("deckgo-remote");!e||!window||(e.addEventListener("event",async t=>{await ae(t)}),e.addEventListener("state",async t=>{window.REMOTE_STATE=t?t.detail:0}),window.addEventListener("resize",async()=>{await k()}),await re(),await k(),await le())};async function re(){let e=document.getElementById("slider");!e||e.addEventListener("slidesDidLoad",async t=>{await ce(t)})}async function ce(e){let t=document.querySelector("deckgo-remote");if(t){if(t.deck=e.detail,!t.room){let n=Math.floor(Math.random()*999);t.room=ROOM_NAME?`${ROOM_NAME} *${n}`:`DeckDeckGo *${n}`}t.socketUrl="https://api.deckdeckgo.com"}}async function le(){let e=document.getElementById("slider");!e||(e.addEventListener("slideNextDidChange",async()=>{await c(!0,!1)}),e.addEventListener("slidePrevDidChange",async()=>{await c(!1,!1)}),e.addEventListener("slideNextDidAnimate",async()=>{await c(!0,!0)}),e.addEventListener("slidePrevDidAnimate",async()=>{await c(!1,!0)}),e.addEventListener("slideWillChange",async t=>{await ue(t)}),e.addEventListener("slideDrag",async t=>{await me(t)}),e.addEventListener("slideToChange",async t=>{await de(t)}))}async function k(){let e=document.querySelector("deckgo-remote");if(!e)return;e.width=window.innerWidth,e.height=window.innerHeight;let t=document.getElementById("slider");!e||!t||(e.length=t.childElementCount)}async function de(e){let t=document.querySelector("deckgo-remote");if(!t||!e)return;let n=e.detail;await t.slideTo(n,0)}async function c(e,t){let n=document.querySelector("deckgo-remote");!n||(e?await n.nextSlide(t):await n.prevSlide(t))}async function ue(e){let t=document.querySelector("deckgo-remote");!t||await t.moveDraw(e.detail,"300ms")}async function me(e){let t=document.querySelector("deckgo-remote");!t||await t.moveDraw(e.detail,"0ms")}function ye(e){return q(e.detail.action,!1)}document.addEventListener("DOMContentLoaded",async()=>{await v(),await g(),await f(),await S()},{once:!0});
