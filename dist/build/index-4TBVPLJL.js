var f=async()=>d("play",!0),S=async()=>d("pause",!0),d=(e,t)=>new Promise(async n=>{let o=document.getElementById("slider");if(!o){n();return}let i=await o.getActiveIndex(),a=document.querySelector(".deckgo-slide-container:nth-child("+(i+1)+")");if(!a||a.tagName!=="deckgo-slide-youtube".toUpperCase()&&a.tagName!=="deckgo-slide-video".toUpperCase()){n();return}e==="pause"?await a.pause():await a.play(),t&&await k(e)});async function k(e){let t=document.querySelector("deckgo-remote");!t||(e==="pause"?await t.pause():await t.play())}var b=async()=>{let e=document.getElementById("slider");!e||(window.event&&window.event.stopPropagation(),await e.slidePrev())},q=async()=>{let e=document.getElementById("slider");!e||(window.event&&window.event.stopPropagation(),await e.slideNext())},u=async()=>{let e=document.getElementById("slider");!e||await e.toggleFullScreen()},m=async e=>{e?.preventDefault();let t=REMOTE_STATE>0&&REMOTE_STATE<4;t&&PENDING_REMOTE_REQUESTS&&PENDING_REMOTE_REQUESTS.length>0?document.querySelector("ion-popover.access")||(await L(),await y()):await T(e,t)};async function T(e,t){let n=document.createElement("div");n.innerHTML=`<div class="ion-padding">
    ${D(t)}
  </div>
  `;let o=document.createElement("ion-popover");o.component=n,e&&(o.event=e),o.mode="ios",o.cssClass="info",document.body.appendChild(o),await o.present();let i=document.querySelector("ion-popover.info ion-toggle");i&&i.addEventListener("ionChange",a=>{R(a)})}async function L(){let e=document.querySelector("ion-popover");e&&await e.dismiss()}async function y(){let e=document.createElement("div");e.innerHTML=`<div class="ion-padding">
    ${P()}
  </div>
  `;let t=document.createElement("ion-popover");t.component=e,t.mode="ios",t.cssClass="access",document.body.appendChild(t),await t.present(),document.querySelector("ion-popover.access button.dismiss")?.addEventListener("click",async()=>{await p(),await document.querySelector("ion-popover.access").dismiss(),await w()}),document.querySelector("ion-popover.access button.connect")?.addEventListener("click",async()=>{await x(),await document.querySelector("ion-popover.access").dismiss(),await w()})}async function R(e){!e||!e.detail||(e.detail.checked?await N():await I())}function D(e){{let t=M();return`<p style="margin: 0; font-size: 16px;">Remote control your presentation with a phone or any devices.</p>
  
    <p style="margin: 0; font-size: 16px;" class="ion-padding-top">Scan the QR-Code or get the Progressive Web Apps at <a href="https://deckdeckgo.app" target="_blank" style="color: var(--ion-color-tertiary);">https://deckdeckgo.app <ion-icon name="open" style="color: var(--ion-color-tertiary); vertical-align: bottom;"></ion-icon></a></p>

    <div class="qrcode-container" style="display: flex; justify-content: center;  --deckgo-qrcode-size: 316px;">
        <deckgo-qrcode content="${`https://deckdeckgo.app/${t&&t!==""?`remote/${t}`:""}`}">
            <ion-icon slot="logo" src="https://deckdeckgo.com/assets/icons/deckdeckgo.svg"></ion-icon>
        </deckgo-qrcode>
    </div>
    
    <ion-list class="ion-no-margin">
        <ion-item style="--border-color: transparent; color: black; --padding-start: 0; --inner-padding-end: 0;">
            <ion-label class="ion-text-wrap" style="margin: 0; font-size: 16px;">Remote control on/off</ion-label> 
            <ion-toggle mode="md" slot="end" checked="${e?"true":"false"}" color="primary" style="--background: var(--ion-color-light); --handle-background: white; --handle-background-checked: white;"></ion-toggle>
        </ion-item>
    </ion-list>

    <p class="ion-no-margin" style="padding-top: 8px; margin-bottom: 0; font-size: 12px;">If you can't connect or lose the connection, toggle off and on the remote to restart.</p>

    <p class="ion-no-margin ion-padding-top" style="margin-bottom: 0; font-size: 12px;">Your presentation's: ${t}</p>`}}function M(){let e=document.querySelector("deckgo-remote");return e&&e.room?e.room:""}function P(){return!PENDING_REMOTE_REQUESTS||PENDING_REMOTE_REQUESTS.length<=0?'<p style="margin: 0; font-size: 16px;">No pending requests.</p>':`<p style="margin: 0; font-size: 16px;">Grant access to remote <strong>${PENDING_REMOTE_REQUESTS[0].message}</strong>?</p>

    <div class="actions" style="display: flex; justify-content: center; align-content: center;">
        <button class="navigation ion-activatable transparent dismiss">
          <ion-ripple-effect></ion-ripple-effect>
          <ion-icon src="https://deckdeckgo.com/assets/icons/ionicons/close.svg"></ion-icon>
        </button>
        
        <button class="navigation ion-activatable primary connect">
          <ion-ripple-effect></ion-ripple-effect>
          <ion-icon src="https://deckdeckgo.com/assets/icons/ionicons/checkmark.svg"></ion-icon>
        </button>
    </div>
    `}async function p(){!PENDING_REMOTE_REQUESTS||PENDING_REMOTE_REQUESTS.length<=0||PENDING_REMOTE_REQUESTS.shift()}async function x(){if(!PENDING_REMOTE_REQUESTS||PENDING_REMOTE_REQUESTS.length<=0)return;let e=document.querySelector("deckgo-remote");e&&await e.start(PENDING_REMOTE_REQUESTS[0].fromSocketId),await p()}async function w(){!PENDING_REMOTE_REQUESTS||PENDING_REMOTE_REQUESTS.length<=0||REMOTE_STATE!==3&&await y()}async function I(){let e=document.querySelector("deckgo-remote");!e||await e.disconnect()}async function N(){let e=document.querySelector("deckgo-remote");if(!e)return;await e.connect();let t=document.getElementById("slider");!t||await t.slideTo(0,300,!1)}var _=class extends HTMLElement{constructor(){super()}async connectedCallback(){let e=await O();this.innerHTML="<ion-list><ion-list-header><h2>Slides</h2></ion-list-header>"+e+"</ion-list>",await U()}};async function O(){let e="",t=document.querySelectorAll("#slider > *");if(t){let n=0;for(let o of Array.from(t))if(o.tagName&&(!o.hasAttribute("slot")||o.getAttribute("slot")==="")){let i=C(o,n);e+="<ion-item ion-item button><ion-label>"+i+"</ion-label></ion-item>",n++}}return e}function C(e,t){if(!e)return"Slide "+(t+1);let n=e.querySelector('[slot="title"],[slot="question"]');if(n&&n.textContent!=="")return n.textContent;{let o=e.querySelector('[slot="start"],[slot="header"]');if(o&&o.textContent!=="")return o.textContent;{let i=e.querySelector('[slot="end"],[slot="footer"]');return i&&i.textContent!==""?i.textContent:"Slide #"+(t+1)}}}customElements.get("deckgo-chapters")||customElements.define("deckgo-chapters",_);async function B(){document.querySelector("ion-menu-button")?.click()}async function U(){let e=document.querySelectorAll("deckgo-chapters ion-item");e&&e.forEach((t,n)=>{t.addEventListener("click",async()=>await A(n),!0)})}async function A(e){await document.getElementById("slider")?.slideTo(e,0),await document.querySelector("ion-menu")?.close()}var $=async()=>{let e=document.getElementById("slider");if(!e)return;let t=await e.getActiveIndex(),n=document.querySelector(".deckgo-slide-container:nth-child("+(t+1)+")");if(!n)return;let o=n.querySelector('[slot="title"]'),i=n.querySelector('[slot="notes"][show]'),a=o?o.innerHTML:"Slide "+t,h=i?i.innerHTML:"No particular notes",c=document.createElement("div");c.innerHTML=`
  <ion-header>
    <ion-toolbar color="tertiary">
      <ion-buttons slot="start">
          <ion-button>
              <ion-icon src="https://deckdeckgo.com/assets/icons/ionicons/close.svg" aria-label="Close"></ion-icon>
          </ion-button>
      </ion-buttons>
      <ion-title>${a}</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content class="ion-padding">
    <p style="white-space: pre-wrap;">${h}</p>
  </ion-content>
  `;let r=document.createElement("ion-modal");r.component=c,document.body.appendChild(r),await r.present();let l=document.querySelector("ion-modal ion-button");!l||l.addEventListener("click",async()=>{await document.querySelector("ion-modal").dismiss()})};function z(){if(!window)return!1;let e=window.matchMedia("(any-pointer:coarse)").matches,t=window.matchMedia("(any-pointer:fine)").matches;return e&&!t}var G=class extends HTMLElement{constructor(){super()}async connectedCallback(){let e=await H();this.innerHTML="<ion-list no-margin>"+e+"</ion-list>"}};async function H(){let e="";return EMBEDDED||(z()||(e+='<ion-item ion-item button detail="false" id="fullScreenMenu" style="--border-style: none;"><ion-icon src="https://deckdeckgo.com/assets/icons/ionicons/expand.svg" aria-label="Enter full screen" slot="end"></ion-icon><ion-label>Full screen</ion-label></ion-item>'),e+='<ion-item ion-item button detail="false" id="remoteMenu" style="--border-style: none;"><ion-icon src="https://deckdeckgo.com/assets/icons/ionicons/phone-portrait.svg" aria-label="Remote control" slot="end"></ion-icon><ion-label>Remote control</ion-label></ion-item>',e+='<ion-item ion-item button detail="false" id="notes" style="--border-style: none;"><ion-icon src="https://deckdeckgo.com/assets/icons/ionicons/clipboard.svg" aria-label="Display slide notes" slot="end"></ion-icon><ion-label>Slide notes</ion-label></ion-item>'),e+='<ion-item ion-item button detail="false" id="share" style="--border-style: none;"><ion-icon src="https://deckdeckgo.com/assets/icons/ionicons/share.svg" aria-label="Share this presentation" slot="end"></ion-icon><ion-label>Share</ion-label></ion-item>',e+='<ion-item ion-item button detail="false" id="made" style="--border-style: none; --ion-item-background: white;"><ion-icon src="https://deckdeckgo.com/assets/icons/deckdeckgo.svg" aria-label="DeckDeckGo" slot="end"></ion-icon><ion-label>Made with DeckDeckGo</ion-label></ion-item>',e}customElements.get("menu-list")||customElements.define("menu-list",G);async function Q(e){e.preventDefault();let t=document.createElement("ion-popover");t.component="menu-list",t.translucent=!0,t.event=e,t.mode="ios",t.cssClass="options",document.body.appendChild(t),await t.present(),document.querySelector("ion-popover #fullScreenMenu")?.addEventListener("click",async()=>{await F()}),document.querySelector("ion-popover #remoteMenu")?.addEventListener("click",async()=>{await W(e)}),document.querySelector("ion-popover #notes")?.addEventListener("click",$),document.querySelector("ion-popover #share")?.addEventListener("click",K),document.querySelector("ion-popover #made")?.addEventListener("click",async()=>{await j("https://deckdeckgo.com")})}async function W(e){await document.querySelector("ion-popover").dismiss(),await m(e)}async function F(){await document.querySelector("ion-popover").dismiss(),await u()}async function j(e){window.open(e,"_blank"),await document.querySelector("ion-popover").dismiss()}async function K(){navigator&&navigator.share?await Y():await J(),await document.querySelector("ion-popover").dismiss()}async function Y(){let e=`${window.location.protocol}//${window.location.host}${window.location.pathname}`;await navigator.share({title:document.title,url:e})}async function J(){let e=document.querySelector("web-social-share");if(!e||!window)return;let t=`${window.location.protocol}//${window.location.host}${window.location.pathname}`,n={displayNames:!0,config:[{twitter:{socialShareUrl:t,socialSharePopupWidth:300,socialSharePopupHeight:400}},{reddit:{socialShareUrl:t,socialSharePopupWidth:300,socialSharePopupHeight:500}},{linkedin:{socialShareUrl:t}},{email:{socialShareBody:t}},{whatsapp:{socialShareUrl:t}},{hackernews:{socialShareUrl:t}}]};e.share=n,e.show=!0}var g=()=>{document.addEventListener("DOMContentLoaded",async()=>{s("play",f),s("pause",S),s("previous",b),s("next",q),s("slidePicker",B),s("fullScreen",u),s("remote",m),s("menu",Q)})};function s(e,t){let n=document.getElementById(e);!n||n.addEventListener("click",t)}var E=()=>{document.querySelector("ion-app")?.classList.remove("loading")};var v=()=>{window.addEventListener("swUpdate",async()=>{let e=await navigator.serviceWorker.getRegistration();if(!e||!e.waiting)return;let t=document.createElement("ion-toast");t.message="A new version is available, reload to update.",t.buttons=[{text:"Reload",handler:()=>{e?.waiting?.postMessage("skipWaiting"),window.location.reload()}}],t.position="top",document.body.appendChild(t),await t.present()},{once:!0})};"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{let e=await navigator.serviceWorker.register("/service-worker.js");e.onupdatefound=()=>{let t=e.installing;t.onstatechange=()=>{t.state==="installed"&&window.dispatchEvent(new Event("swUpdate"))}}}catch{console.warn("No service worker registered")}});document.addEventListener("DOMContentLoaded",()=>E(),{once:!0});v();g();
